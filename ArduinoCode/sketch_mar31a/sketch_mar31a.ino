int firstSensor=0;// first analog sensorintsecondSensor=0;// second analog sensorintthirdSensor=0;// digital sensorintinByte=0;// incoming serial bytevoidsetup(){// start serial port at 9600 bps:Serial.begin(9600);pinMode(2,INPUT);// digital sensor is on digital pin 2establishContact();// send a byte to establish contact until receiver responds}voidloop(){// if we get a valid byte, read analog ins:if(Serial.available()>0){// get incoming byte:inByte=Serial.read();// read first analog input, divide by 4 to make the range 0-255:firstSensor=analogRead(A0)/4;// delay 10ms to let the ADC recover:delay(10);// read second analog input, divide by 4 to make the range 0-255:secondSensor=analogRead(1)/4;// read switch, map it to 0 or 255LthirdSensor=map(digitalRead(2),0,1,0,255);// send sensor values:Serial.write(firstSensor);Serial.write(secondSensor);Serial.write(thirdSensor);}}voidestablishContact(){while(Serial.available()<=0){Serial.print('A');// send a capital Adelay(300);}
